(this.webpackJsonpchatboxfront=this.webpackJsonpchatboxfront||[]).push([[0],{16:function(e,t,n){e.exports=n(40)},39:function(e,t,n){},40:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(15),o=n.n(c),s=n(2),l=n.n(s),u=n(4),i=n(3),p=function(e){var t=e.message;return r.a.createElement("div",{style:{color:"#543257",fontStyle:"italic",fontSize:16,listStyleType:"none",margin:10,padding:10,backgroundColor:"#aabb97",boxShadow:"0 4px 4px",textAlign:"left"}},r.a.createElement("li",null,t.username," ",t.date.slice(11,16),r.a.createElement("p",{style:{color:"#e8f1f7"}},t.content)))},m=n(5),g=n.n(m),f=null,d={getAllMessages:function(){return g.a.get("/api/messages").then((function(e){return e.data}))},createMessage:function(){var e=Object(u.a)(l.a.mark((function e(t){var n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:f}},e.next=3,g.a.post("/api/messages",t,n);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),setToken:function(e){f="bearer ".concat(e)}},b={login:function(){var e=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("credentials: ",t),e.next=3,g.a.post("/api/login",t);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},v=function(){var e=Object(a.useState)(null),t=Object(i.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)([]),s=Object(i.a)(o,2),m=s[0],g=s[1],f=Object(a.useState)(""),v=Object(i.a)(f,2),h=v[0],E=v[1],O=Object(a.useState)(""),w=Object(i.a)(O,2),j=w[0],x=w[1],S=Object(a.useState)(""),k=Object(i.a)(S,2),y=k[0],C=k[1],M=Object(a.useState)(null),A=Object(i.a)(M,2),T=A[0],J=A[1];Object(a.useEffect)((function(){d.getAllMessages().then((function(e){console.log("Message",e),g(e)}))}),[]),Object(a.useEffect)((function(){var e=window.localStorage.getItem("loggedChatBoxUser");if(e){var t=JSON.parse(e);J(t),d.setToken(t.token)}}),[]);var U=function(e){e.preventDefault();var t={content:h,id:m.length+1};d.createMessage(t).then((function(e){d.getAllMessages().then((function(e){console.log("Message",e),g(e),E("")}))}))},B=function(e){E(e.target.value)},I=function(){var e=Object(u.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,b.login({username:j,password:y});case 4:a=e.sent,window.localStorage.setItem("loggedChatBoxUser",JSON.stringify(a)),d.setToken(a.token),J(a),x(""),C(""),console.log("Login ok!"),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),c("Wrong credentials"),console.log(n);case 17:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{class:"grid-container"},r.a.createElement("div",{class:"grid-item"},r.a.createElement("h1",null," Chatbox  ",null!==T&&r.a.createElement("form",{onSubmit:U},r.a.createElement("input",{value:h,onChange:B}),r.a.createElement("button",{type:"submit"},"Send")))),null===T&&r.a.createElement("form",{onSubmit:I},r.a.createElement("p",null,"Login to participate in the chat!"),r.a.createElement("p",null,r.a.createElement("strong",null,"Tip! "),"Username: demo & password: salasana"),r.a.createElement("div",null,"username:",r.a.createElement("input",{value:j,name:"Username",onChange:function(e){var t=e.target;return x(t.value)}})),r.a.createElement("div",null,"password:",r.a.createElement("input",{value:y,name:"Password",type:"password",onChange:function(e){var t=e.target;return C(t.value)}})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"login"))),r.a.createElement("div",{class:"grid-item"},r.a.createElement("ul",null,m.map((function(e){return r.a.createElement(p,{key:e.id,message:e})})))))};n(39);o.a.render(r.a.createElement(v,null),document.getElementById("root"))}},[[16,1,2]]]);
//# sourceMappingURL=main.ae7dc780.chunk.js.map