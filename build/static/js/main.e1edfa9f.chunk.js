(this.webpackJsonpchatboxfront=this.webpackJsonpchatboxfront||[]).push([[0],{16:function(e,t,n){e.exports=n(40)},39:function(e,t,n){},40:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(15),c=n.n(o),l=n(2),u=n.n(l),s=n(4),i=n(3),p=function(e){var t=e.message;return r.a.createElement("div",{style:{color:"#543257",fontStyle:"italic",fontSize:16,listStyleType:"none",margin:10,padding:10,backgroundColor:"#aabb97",boxShadow:"0 4px 4px",textAlign:"left"}},r.a.createElement("li",null,t.username," ",t.date.slice(11,16),r.a.createElement("p",{style:{color:"#e8f1f7"}},t.content)))},m=n(5),f=n.n(m),g=null,d={getAll:function(){return f.a.get("/api/messages").then((function(e){return e.data}))},create:function(){var e=Object(s.a)(u.a.mark((function e(t){var n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:g}},e.next=3,f.a.post("/api/messages",t,n);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),setToken:function(e){g="bearer ".concat(e)}},b={login:function(){var e=Object(s.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("credentials: ",t),e.next=3,f.a.post("/api/login",t);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},v=function(){var e=Object(a.useState)(null),t=Object(i.a)(e,2),n=t[0],o=t[1],c=Object(a.useState)([]),l=Object(i.a)(c,2),m=l[0],f=l[1],g=Object(a.useState)(""),v=Object(i.a)(g,2),h=v[0],E=v[1],w=Object(a.useState)(""),O=Object(i.a)(w,2),j=O[0],x=O[1],S=Object(a.useState)(""),k=Object(i.a)(S,2),y=k[0],C=k[1],A=Object(a.useState)(null),T=Object(i.a)(A,2),J=T[0],U=T[1];Object(a.useEffect)((function(){d.getAll().then((function(e){console.log("Message",e),f(e)}))}),[]),Object(a.useEffect)((function(){var e=window.localStorage.getItem("loggedChatBoxUser");if(e){var t=JSON.parse(e);U(t),d.setToken(t.token)}}),[]);var B=function(e){e.preventDefault();var t={content:h,id:m.length+1};d.create(t).then((function(e){d.getAll().then((function(e){console.log("Message",e),f(e),E("")}))}))},I=function(e){E(e.target.value)},z=function(){var e=Object(s.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),console.log("logging in with",j,y),e.prev=2,e.next=5,b.login({username:j,password:y});case 5:a=e.sent,window.localStorage.setItem("loggedChatBoxUser",JSON.stringify(a)),d.setToken(a.token),U(a),x(""),C(""),console.log("Login ok!"),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(2),o("Wrong credentials"),console.log(n);case 18:case"end":return e.stop()}}),e,null,[[2,14]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{class:"grid-container"},r.a.createElement("div",{class:"grid-item"},r.a.createElement("h1",null," Chatbox  ",null!==J&&r.a.createElement("form",{onSubmit:B},r.a.createElement("input",{value:h,onChange:I}),r.a.createElement("button",{type:"submit"},"Send")))),null===J&&r.a.createElement("form",{onSubmit:z},r.a.createElement("p",null,"Login to participate in the chat!"),r.a.createElement("p",null,r.a.createElement("strong",null,"Tip!"),"Username: demo & password: salasana"),r.a.createElement("div",null,"username:",r.a.createElement("input",{value:j,name:"Username",onChange:function(e){var t=e.target;return x(t.value)}})),r.a.createElement("div",null,"password:",r.a.createElement("input",{value:y,name:"Password",type:"password",onChange:function(e){var t=e.target;return C(t.value)}})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"login"))),r.a.createElement("div",{class:"grid-item"},r.a.createElement("ul",null,m.map((function(e){return r.a.createElement(p,{key:e.id,message:e})})))))};n(39);c.a.render(r.a.createElement(v,null),document.getElementById("root"))}},[[16,1,2]]]);
//# sourceMappingURL=main.e1edfa9f.chunk.js.map